(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{628:function(s,e,t){"use strict";t.r(e);var a=t(6),r=Object(a.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"redis-底层数据结构-robj"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#redis-底层数据结构-robj"}},[s._v("#")]),s._v(" Redis 底层数据结构 - robj")]),s._v(" "),t("h2",{attrs:{id:"定义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#定义"}},[s._v("#")]),s._v(" 定义")]),s._v(" "),t("p",[t("strong",[s._v("Redis 中的对象")])]),s._v(" "),t("h2",{attrs:{id:"源码分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#源码分析"}},[s._v("#")]),s._v(" 源码分析")]),s._v(" "),t("div",{staticClass:"language-c extra-class"},[t("pre",{pre:!0,attrs:{class:"language-c"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* in server.h */")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* The actual Redis Object */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OBJ_STRING "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("    ")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* String object. */")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OBJ_LIST "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("      ")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* List object. */")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OBJ_SET "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("       ")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* Set object. */")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OBJ_ZSET "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("      ")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* Sorted set object. */")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OBJ_HASH "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("      ")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* Hash object. */")])]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* Objects encoding. Some kind of objects like Strings and Hashes can be\n * internally represented in multiple ways. The 'encoding' field of the object\n * is set to one of this fields for this object. */")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OBJ_ENCODING_RAW "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("     ")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* Raw representation */")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OBJ_ENCODING_INT "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("     ")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* Encoded as integer */")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OBJ_ENCODING_HT "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("      ")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* Encoded as hash table */")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OBJ_ENCODING_ZIPMAP "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("  ")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* Encoded as zipmap */")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OBJ_ENCODING_LINKEDLIST "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" ")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* No longer used: old list encoding. */")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OBJ_ENCODING_ZIPLIST "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" ")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* Encoded as ziplist */")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OBJ_ENCODING_INTSET "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("  ")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* Encoded as intset */")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OBJ_ENCODING_SKIPLIST "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("  ")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* Encoded as skiplist */")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OBJ_ENCODING_EMBSTR "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  ")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* Embedded sds string encoding */")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OBJ_ENCODING_QUICKLIST "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" ")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* Encoded as linked list of ziplists */")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token macro property"}},[t("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),t("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("define")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token expression"}},[s._v("OBJ_ENCODING_STREAM "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" ")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* Encoded as a radix tree of listpacks */")])]),s._v("\n")])])])])}),[],!1,null,null,null);e.default=r.exports}}]);