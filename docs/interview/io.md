# IO 篇

## 面试问题连环炮

1.  什么是IO？
2.  BIO、NIO、AIO 有什么区别？ 
3.  Netty了解吗？

## 分析

首先，解释下同步/异步和阻塞/非阻塞的概念，

* 同步，是指由用户线程主动从内核空间copy数据
* 异步，是指由内核空间主动copy数据到用户空间
* 阻塞，是指当内核空间没有数据返回时，用户线程要阻塞在调用处，直到数据返回
* 非阻塞，是指用户线程在请求数据后，可以立即返回，不用阻塞在调用处

然后，下面就可以大致分析下四种IO模型，

* 同步阻塞IO，由用户线程发起读取数据的请求，并且用户线程会一直阻塞在调用处，直到内核空间有数据后，开始读取
* 同步非阻塞IO，由用户线程发起请求，如果此时内核空间还没有数据到达，则用户线程可以先返回处理其他逻辑，期间用户线程可以调用方法查看内核空间是否有数据了，如果数据到达，则开始读取
* IO多路复用，和同步非阻塞IO比较类似，区别是，IO多路复用不需要每个用户线程去查看内核空间的数据是否到达，而是有一个专门的线程去查看多个用户线程的数据状态，如果有数据到达，该线程会通知目标线程去读取数据
* 异步非阻塞IO，用户线程发起读取数据的请求后，直接返回，并注册一个回调到内核空间，当数据到达后，会由内核空间主动copy到用户空间，copy完成后，会调通知到用户线程

根据上面的分析，可以很清楚的发现，

* BIO，其实就对应了同步阻塞IO
* NIO，对应了IO多路复用
* AIO，对应了异步非阻塞IO

那么，Netty又是什么呢？